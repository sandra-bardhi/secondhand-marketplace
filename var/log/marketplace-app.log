2024-11-03 08:20:06 - Starting MarketplaceApplication using Java 17.0.10 with PID 17084 (C:\Users\User\Desktop\GITHUB\secondhand-marketplace\target\classes started by User in C:\Users\User\Desktop\GITHUB\secondhand-marketplace)
2024-11-03 08:20:06 - Running with Spring Boot v3.3.5, Spring v6.1.14
2024-11-03 08:20:06 - No active profile set, falling back to 1 default profile: "default"
2024-11-03 08:20:07 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-11-03 08:20:08 - Finished Spring Data repository scanning in 85 ms. Found 2 JPA repository interfaces.
2024-11-03 08:20:09 - Tomcat initialized with port 8080 (http)
2024-11-03 08:20:09 - Initializing ProtocolHandler ["http-nio-8080"]
2024-11-03 08:20:09 - Starting service [Tomcat]
2024-11-03 08:20:09 - Starting Servlet engine: [Apache Tomcat/10.1.31]
2024-11-03 08:20:09 - Initializing Spring embedded WebApplicationContext
2024-11-03 08:20:09 - Root WebApplicationContext: initialization completed in 2578 ms
2024-11-03 08:20:09 - HikariPool-1 - Starting...
2024-11-03 08:20:09 - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-11-03 08:20:09 - HikariPool-1 - Start completed.
2024-11-03 08:20:09 - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-11-03 08:20:10 - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-11-03 08:20:10 - HHH000412: Hibernate ORM core version 6.5.3.Final
2024-11-03 08:20:10 - HHH000026: Second-level cache disabled
2024-11-03 08:20:10 - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-11-03 08:20:11 - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-11-03 08:20:12 - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-11-03 08:20:12 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-11-03 08:20:12 - Filter 'jwtAuthenticationFilter' configured for use
2024-11-03 08:20:12 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-11-03 08:20:13 - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2024-11-03 08:20:13 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0: Error creating bean with name 'securityFilterChain' defined in class path resource [com/secondhand/marketplace/config/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Can't configure anyRequest after itself
2024-11-03 08:20:13 - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-11-03 08:20:13 - HikariPool-1 - Shutdown initiated...
2024-11-03 08:20:13 - HikariPool-1 - Shutdown completed.
2024-11-03 08:20:13 - Stopping service [Tomcat]
2024-11-03 08:20:13 - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-11-03 08:20:13 - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0: Error creating bean with name 'securityFilterChain' defined in class path resource [com/secondhand/marketplace/config/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Can't configure anyRequest after itself
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:896)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:849)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1439)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:971)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:625)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352)
	at com.secondhand.marketplace.MarketplaceApplication.main(MarketplaceApplication.java:10)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securityFilterChain' defined in class path resource [com/secondhand/marketplace/config/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Can't configure anyRequest after itself
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:648)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:636)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1185)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1689)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1653)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeanCollection(DefaultListableBeanFactory.java:1543)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1511)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1392)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:888)
	... 20 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Can't configure anyRequest after itself
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:178)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:644)
	... 37 common frames omitted
Caused by: java.lang.IllegalStateException: Can't configure anyRequest after itself
	at org.springframework.util.Assert.state(Assert.java:76)
	at org.springframework.security.config.annotation.web.AbstractRequestMatcherRegistry.anyRequest(AbstractRequestMatcherRegistry.java:102)
	at com.secondhand.marketplace.config.SecurityConfig.lambda$securityFilterChain$1(SecurityConfig.java:50)
	at org.springframework.security.config.annotation.web.builders.HttpSecurity.authorizeHttpRequests(HttpSecurity.java:1467)
	at com.secondhand.marketplace.config.SecurityConfig.securityFilterChain(SecurityConfig.java:46)
	at com.secondhand.marketplace.config.SecurityConfig$$SpringCGLIB$$0.CGLIB$securityFilterChain$0(<generated>)
	at com.secondhand.marketplace.config.SecurityConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:348)
	at com.secondhand.marketplace.config.SecurityConfig$$SpringCGLIB$$0.securityFilterChain(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:146)
	... 38 common frames omitted
2024-11-03 08:23:33 - Starting MarketplaceApplication using Java 17.0.10 with PID 12848 (C:\Users\User\Desktop\GITHUB\secondhand-marketplace\target\classes started by User in C:\Users\User\Desktop\GITHUB\secondhand-marketplace)
2024-11-03 08:23:33 - Running with Spring Boot v3.3.5, Spring v6.1.14
2024-11-03 08:23:33 - No active profile set, falling back to 1 default profile: "default"
2024-11-03 08:23:34 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-11-03 08:23:35 - Finished Spring Data repository scanning in 95 ms. Found 2 JPA repository interfaces.
2024-11-03 08:23:35 - Tomcat initialized with port 8080 (http)
2024-11-03 08:23:36 - Initializing ProtocolHandler ["http-nio-8080"]
2024-11-03 08:23:36 - Starting service [Tomcat]
2024-11-03 08:23:36 - Starting Servlet engine: [Apache Tomcat/10.1.31]
2024-11-03 08:23:36 - Initializing Spring embedded WebApplicationContext
2024-11-03 08:23:36 - Root WebApplicationContext: initialization completed in 2293 ms
2024-11-03 08:23:36 - HikariPool-1 - Starting...
2024-11-03 08:23:36 - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-11-03 08:23:36 - HikariPool-1 - Start completed.
2024-11-03 08:23:36 - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-11-03 08:23:36 - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-11-03 08:23:36 - HHH000412: Hibernate ORM core version 6.5.3.Final
2024-11-03 08:23:36 - HHH000026: Second-level cache disabled
2024-11-03 08:23:37 - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-11-03 08:23:37 - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-11-03 08:23:38 - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-11-03 08:23:38 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-11-03 08:23:39 - Filter 'jwtAuthenticationFilter' configured for use
2024-11-03 08:23:39 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-11-03 08:23:39 - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2024-11-03 08:23:39 - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2024-11-03 08:23:40 - Starting ProtocolHandler ["http-nio-8080"]
2024-11-03 08:23:40 - Tomcat started on port 8080 (http) with context path '/'
2024-11-03 08:23:40 - Started MarketplaceApplication in 7.097 seconds (process running for 7.793)
2024-11-03 08:23:46 - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-03 08:23:46 - Initializing Servlet 'dispatcherServlet'
2024-11-03 08:23:46 - Completed initialization in 1 ms
2024-11-03 08:23:46 - Securing GET /swagger-ui/index.html
2024-11-03 08:23:46 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 08:23:46 - Secured GET /swagger-ui/index.html
2024-11-03 08:23:46 - Securing GET /swagger-ui/swagger-ui.css
2024-11-03 08:23:46 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 08:23:46 - Secured GET /swagger-ui/swagger-ui.css
2024-11-03 08:23:46 - Securing GET /swagger-ui/swagger-ui-standalone-preset.js
2024-11-03 08:23:46 - Securing GET /swagger-ui/swagger-initializer.js
2024-11-03 08:23:46 - Securing GET /swagger-ui/index.css
2024-11-03 08:23:46 - Securing GET /swagger-ui/swagger-ui-bundle.js
2024-11-03 08:23:46 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 08:23:46 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 08:23:46 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 08:23:46 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 08:23:46 - Secured GET /swagger-ui/swagger-ui-standalone-preset.js
2024-11-03 08:23:46 - Secured GET /swagger-ui/swagger-initializer.js
2024-11-03 08:23:46 - Secured GET /swagger-ui/index.css
2024-11-03 08:23:46 - Secured GET /swagger-ui/swagger-ui-bundle.js
2024-11-03 08:23:46 - Securing GET /swagger-ui/favicon-32x32.png
2024-11-03 08:23:46 - Securing GET /v3/api-docs/swagger-config
2024-11-03 08:23:46 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 08:23:46 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 08:23:46 - Secured GET /v3/api-docs/swagger-config
2024-11-03 08:23:46 - Secured GET /swagger-ui/favicon-32x32.png
2024-11-03 08:23:46 - Securing GET /v3/api-docs
2024-11-03 08:23:46 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 08:23:46 - Secured GET /v3/api-docs
2024-11-03 08:23:47 - Init duration for springdoc-openapi is: 522 ms
2024-11-03 08:26:55 - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-11-03 08:26:55 - HikariPool-1 - Shutdown initiated...
2024-11-03 08:26:55 - HikariPool-1 - Shutdown completed.
2024-11-03 08:27:07 - Starting MarketplaceApplication using Java 17.0.10 with PID 9356 (C:\Users\User\Desktop\GITHUB\secondhand-marketplace\target\classes started by User in C:\Users\User\Desktop\GITHUB\secondhand-marketplace)
2024-11-03 08:27:07 - Running with Spring Boot v3.3.5, Spring v6.1.14
2024-11-03 08:27:07 - No active profile set, falling back to 1 default profile: "default"
2024-11-03 08:27:08 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-11-03 08:27:08 - Finished Spring Data repository scanning in 76 ms. Found 2 JPA repository interfaces.
2024-11-03 08:27:09 - Tomcat initialized with port 8080 (http)
2024-11-03 08:27:09 - Initializing ProtocolHandler ["http-nio-8080"]
2024-11-03 08:27:09 - Starting service [Tomcat]
2024-11-03 08:27:09 - Starting Servlet engine: [Apache Tomcat/10.1.31]
2024-11-03 08:27:10 - Initializing Spring embedded WebApplicationContext
2024-11-03 08:27:10 - Root WebApplicationContext: initialization completed in 2413 ms
2024-11-03 08:27:10 - HikariPool-1 - Starting...
2024-11-03 08:27:10 - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-11-03 08:27:10 - HikariPool-1 - Start completed.
2024-11-03 08:27:10 - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-11-03 08:27:10 - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-11-03 08:27:10 - HHH000412: Hibernate ORM core version 6.5.3.Final
2024-11-03 08:27:10 - HHH000026: Second-level cache disabled
2024-11-03 08:27:11 - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-11-03 08:27:11 - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-11-03 08:27:12 - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-11-03 08:27:12 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-11-03 08:27:13 - Filter 'jwtAuthenticationFilter' configured for use
2024-11-03 08:27:13 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-11-03 08:27:13 - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2024-11-03 08:27:13 - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2024-11-03 08:27:14 - Starting ProtocolHandler ["http-nio-8080"]
2024-11-03 08:27:14 - Tomcat started on port 8080 (http) with context path '/'
2024-11-03 08:27:14 - Started MarketplaceApplication in 7.451 seconds (process running for 8.221)
2024-11-03 08:27:20 - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-03 08:27:20 - Initializing Servlet 'dispatcherServlet'
2024-11-03 08:27:20 - Completed initialization in 1 ms
2024-11-03 08:27:20 - Securing GET /swagger-ui/index.html
2024-11-03 08:27:20 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 08:27:20 - Secured GET /swagger-ui/index.html
2024-11-03 08:27:20 - Securing GET /swagger-ui/swagger-ui.css
2024-11-03 08:27:20 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 08:27:20 - Securing GET /swagger-ui/swagger-ui-standalone-preset.js
2024-11-03 08:27:20 - Securing GET /swagger-ui/swagger-initializer.js
2024-11-03 08:27:20 - Securing GET /swagger-ui/swagger-ui-bundle.js
2024-11-03 08:27:20 - Securing GET /swagger-ui/index.css
2024-11-03 08:27:20 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 08:27:20 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 08:27:20 - Secured GET /swagger-ui/swagger-ui.css
2024-11-03 08:27:20 - Secured GET /swagger-ui/swagger-ui-standalone-preset.js
2024-11-03 08:27:20 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 08:27:20 - Secured GET /swagger-ui/swagger-initializer.js
2024-11-03 08:27:20 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 08:27:20 - Secured GET /swagger-ui/swagger-ui-bundle.js
2024-11-03 08:27:20 - Secured GET /swagger-ui/index.css
2024-11-03 08:27:20 - Securing GET /swagger-ui/favicon-32x32.png
2024-11-03 08:27:20 - Securing GET /v3/api-docs/swagger-config
2024-11-03 08:27:20 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 08:27:20 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 08:27:20 - Secured GET /swagger-ui/favicon-32x32.png
2024-11-03 08:27:20 - Secured GET /v3/api-docs/swagger-config
2024-11-03 08:27:20 - Securing GET /v3/api-docs
2024-11-03 08:27:20 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 08:27:20 - Secured GET /v3/api-docs
2024-11-03 08:27:21 - Init duration for springdoc-openapi is: 568 ms
2024-11-03 08:27:28 - Securing POST /api/register
2024-11-03 08:27:28 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 08:27:28 - Secured POST /api/register
2024-11-03 08:27:28 - Registering user: com.secondhand.marketplace.entity.User@2caecdc7
2024-11-03 08:27:28 - User registered successfully with ID: 1
2024-11-03 08:27:28 - User registered
2024-11-03 08:27:38 - Securing GET /api/clothes
2024-11-03 08:27:38 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 08:27:38 - Pre-authenticated entry point called. Rejecting access
2024-11-03 08:27:38 - Securing GET /error
2024-11-03 08:27:38 - Secured GET /error
2024-11-03 08:27:38 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 08:27:58 - Securing POST /api/authenticate
2024-11-03 08:27:58 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 08:27:58 - Secured POST /api/authenticate
2024-11-03 08:27:58 - Authenticated user
2024-11-03 08:27:58 - User string authenticated successfully.
2024-11-03 08:28:20 - Securing GET /api/clothes
2024-11-03 08:28:20 - Secured GET /api/clothes
2024-11-03 08:28:20 - Fetching all garments
2024-11-03 08:28:20 - Fetched 0 garments
2024-11-03 08:28:55 - Securing POST /api/clothes/add
2024-11-03 08:28:55 - Secured POST /api/clothes/add
2024-11-03 08:28:55 - An unexpected error occurred: JSON parse error: Unexpected character ('}' (code 125)): was expecting double-quote to start field name
org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Unexpected character ('}' (code 125)): was expecting double-quote to start field name
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:406)
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.read(AbstractJackson2HttpMessageConverter.java:354)
	at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodArgumentResolver.readWithMessageConverters(AbstractMessageConverterMethodArgumentResolver.java:184)
	at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.readWithMessageConverters(RequestResponseBodyMethodProcessor.java:161)
	at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.resolveArgument(RequestResponseBodyMethodProcessor.java:135)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:224)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:178)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.secondhand.marketplace.filter.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:49)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: com.fasterxml.jackson.core.JsonParseException: Unexpected character ('}' (code 125)): was expecting double-quote to start field name
 at [Source: REDACTED (`StreamReadFeature.INCLUDE_SOURCE_IN_LOCATION` disabled); line: 7, column: 1]
	at com.fasterxml.jackson.core.JsonParser._constructReadException(JsonParser.java:2648)
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportUnexpectedChar(ParserMinimalBase.java:685)
	at com.fasterxml.jackson.core.json.UTF8StreamJsonParser._handleOddName(UTF8StreamJsonParser.java:2103)
	at com.fasterxml.jackson.core.json.UTF8StreamJsonParser._parseName(UTF8StreamJsonParser.java:1753)
	at com.fasterxml.jackson.core.json.UTF8StreamJsonParser.nextFieldName(UTF8StreamJsonParser.java:1040)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:406)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:185)
	at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:342)
	at com.fasterxml.jackson.databind.ObjectReader._bindAndClose(ObjectReader.java:2125)
	at com.fasterxml.jackson.databind.ObjectReader.readValue(ObjectReader.java:1501)
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:395)
	... 101 common frames omitted
2024-11-03 08:29:03 - Securing POST /api/clothes/add
2024-11-03 08:29:03 - Secured POST /api/clothes/add
2024-11-03 08:29:03 - Publishing garment: com.secondhand.marketplace.entity.Garment@11fa930b
2024-11-03 08:29:03 - Garment published successfully by user string: GarmentDto(id=1, type=string, description=string, size=string, price=0.0, publisherId=1)
2024-11-03 08:29:13 - Securing GET /api/clothes
2024-11-03 08:29:13 - Secured GET /api/clothes
2024-11-03 08:29:13 - Fetching all garments
2024-11-03 08:29:13 - Fetched 1 garments
2024-11-03 08:29:38 - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-11-03 08:29:38 - HikariPool-1 - Shutdown initiated...
2024-11-03 08:29:38 - HikariPool-1 - Shutdown completed.
2024-11-03 12:54:07 - Starting MarketplaceApplication using Java 17.0.10 with PID 3816 (C:\Users\User\Desktop\GITHUB\secondhand-marketplace\target\classes started by User in C:\Users\User\Desktop\GITHUB\secondhand-marketplace)
2024-11-03 12:54:07 - Running with Spring Boot v3.3.5, Spring v6.1.14
2024-11-03 12:54:07 - No active profile set, falling back to 1 default profile: "default"
2024-11-03 12:54:08 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-11-03 12:54:08 - Finished Spring Data repository scanning in 66 ms. Found 2 JPA repository interfaces.
2024-11-03 12:54:09 - Tomcat initialized with port 8080 (http)
2024-11-03 12:54:09 - Initializing ProtocolHandler ["http-nio-8080"]
2024-11-03 12:54:09 - Starting service [Tomcat]
2024-11-03 12:54:09 - Starting Servlet engine: [Apache Tomcat/10.1.31]
2024-11-03 12:54:10 - Initializing Spring embedded WebApplicationContext
2024-11-03 12:54:10 - Root WebApplicationContext: initialization completed in 2881 ms
2024-11-03 12:54:10 - HikariPool-1 - Starting...
2024-11-03 12:54:10 - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-11-03 12:54:10 - HikariPool-1 - Start completed.
2024-11-03 12:54:10 - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-11-03 12:54:10 - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-11-03 12:54:11 - HHH000412: Hibernate ORM core version 6.5.3.Final
2024-11-03 12:54:11 - HHH000026: Second-level cache disabled
2024-11-03 12:54:11 - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-11-03 12:54:11 - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-11-03 12:54:13 - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-11-03 12:54:13 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-11-03 12:54:13 - Filter 'jwtAuthenticationFilter' configured for use
2024-11-03 12:54:13 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-11-03 12:54:13 - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2024-11-03 12:54:14 - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2024-11-03 12:54:15 - Starting ProtocolHandler ["http-nio-8080"]
2024-11-03 12:54:15 - Tomcat started on port 8080 (http) with context path '/'
2024-11-03 12:54:15 - Started MarketplaceApplication in 8.685 seconds (process running for 9.887)
2024-11-03 12:56:03 - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-11-03 12:56:03 - HikariPool-1 - Shutdown initiated...
2024-11-03 12:56:03 - HikariPool-1 - Shutdown completed.
2024-11-03 12:56:36 - Starting MarketplaceApplication using Java 17.0.10 with PID 21248 (C:\Users\User\Desktop\GITHUB\secondhand-marketplace\target\classes started by User in C:\Users\User\Desktop\GITHUB\secondhand-marketplace)
2024-11-03 12:56:36 - Running with Spring Boot v3.3.5, Spring v6.1.14
2024-11-03 12:56:36 - No active profile set, falling back to 1 default profile: "default"
2024-11-03 12:56:38 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-11-03 12:56:38 - Finished Spring Data repository scanning in 70 ms. Found 2 JPA repository interfaces.
2024-11-03 12:56:39 - Tomcat initialized with port 8080 (http)
2024-11-03 12:56:39 - Initializing ProtocolHandler ["http-nio-8080"]
2024-11-03 12:56:39 - Starting service [Tomcat]
2024-11-03 12:56:39 - Starting Servlet engine: [Apache Tomcat/10.1.31]
2024-11-03 12:56:39 - Initializing Spring embedded WebApplicationContext
2024-11-03 12:56:39 - Root WebApplicationContext: initialization completed in 2369 ms
2024-11-03 12:56:39 - HikariPool-1 - Starting...
2024-11-03 12:56:39 - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-11-03 12:56:39 - HikariPool-1 - Start completed.
2024-11-03 12:56:39 - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-11-03 12:56:40 - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-11-03 12:56:40 - HHH000412: Hibernate ORM core version 6.5.3.Final
2024-11-03 12:56:40 - HHH000026: Second-level cache disabled
2024-11-03 12:56:41 - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-11-03 12:56:41 - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-11-03 12:56:42 - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-11-03 12:56:42 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-11-03 12:56:42 - Filter 'jwtAuthenticationFilter' configured for use
2024-11-03 12:56:43 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-11-03 12:56:43 - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2024-11-03 12:56:43 - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2024-11-03 12:56:44 - Starting ProtocolHandler ["http-nio-8080"]
2024-11-03 12:56:44 - Tomcat started on port 8080 (http) with context path '/'
2024-11-03 12:56:44 - Started MarketplaceApplication in 7.819 seconds (process running for 8.566)
2024-11-03 13:12:40 - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-11-03 13:12:40 - HikariPool-1 - Shutdown initiated...
2024-11-03 13:12:40 - HikariPool-1 - Shutdown completed.
2024-11-03 13:23:10 - Starting MarketplaceApplication using Java 17.0.10 with PID 2800 (C:\Users\User\Desktop\GITHUB\secondhand-marketplace\target\classes started by User in C:\Users\User\Desktop\GITHUB\secondhand-marketplace)
2024-11-03 13:23:10 - Running with Spring Boot v3.3.5, Spring v6.1.14
2024-11-03 13:23:10 - No active profile set, falling back to 1 default profile: "default"
2024-11-03 13:23:11 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-11-03 13:23:11 - Finished Spring Data repository scanning in 65 ms. Found 2 JPA repository interfaces.
2024-11-03 13:23:12 - Tomcat initialized with port 8080 (http)
2024-11-03 13:23:12 - Initializing ProtocolHandler ["http-nio-8080"]
2024-11-03 13:23:12 - Starting service [Tomcat]
2024-11-03 13:23:12 - Starting Servlet engine: [Apache Tomcat/10.1.31]
2024-11-03 13:23:12 - Initializing Spring embedded WebApplicationContext
2024-11-03 13:23:12 - Root WebApplicationContext: initialization completed in 2455 ms
2024-11-03 13:23:12 - HikariPool-1 - Starting...
2024-11-03 13:23:13 - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-11-03 13:23:13 - HikariPool-1 - Start completed.
2024-11-03 13:23:13 - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-11-03 13:23:13 - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-11-03 13:23:13 - HHH000412: Hibernate ORM core version 6.5.3.Final
2024-11-03 13:23:13 - HHH000026: Second-level cache disabled
2024-11-03 13:23:13 - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-11-03 13:23:14 - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-11-03 13:23:15 - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-11-03 13:23:15 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-11-03 13:23:15 - Filter 'jwtAuthenticationFilter' configured for use
2024-11-03 13:23:15 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-11-03 13:23:15 - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2024-11-03 13:23:16 - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2024-11-03 13:23:16 - Starting ProtocolHandler ["http-nio-8080"]
2024-11-03 13:23:16 - Tomcat started on port 8080 (http) with context path '/'
2024-11-03 13:23:16 - Started MarketplaceApplication in 7.165 seconds (process running for 7.926)
2024-11-03 13:23:24 - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-03 13:23:24 - Initializing Servlet 'dispatcherServlet'
2024-11-03 13:23:24 - Completed initialization in 1 ms
2024-11-03 13:23:24 - Securing GET /swagger-ui/index.html
2024-11-03 13:23:24 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 13:23:24 - Secured GET /swagger-ui/index.html
2024-11-03 13:23:24 - Securing GET /swagger-ui/swagger-ui.css
2024-11-03 13:23:24 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 13:23:24 - Secured GET /swagger-ui/swagger-ui.css
2024-11-03 13:23:24 - Securing GET /swagger-ui/swagger-initializer.js
2024-11-03 13:23:24 - Securing GET /swagger-ui/index.css
2024-11-03 13:23:24 - Securing GET /swagger-ui/swagger-ui-standalone-preset.js
2024-11-03 13:23:24 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 13:23:24 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 13:23:24 - Securing GET /swagger-ui/swagger-ui-bundle.js
2024-11-03 13:23:24 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 13:23:24 - Secured GET /swagger-ui/swagger-initializer.js
2024-11-03 13:23:24 - Secured GET /swagger-ui/index.css
2024-11-03 13:23:24 - Secured GET /swagger-ui/swagger-ui-standalone-preset.js
2024-11-03 13:23:24 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 13:23:24 - Secured GET /swagger-ui/swagger-ui-bundle.js
2024-11-03 13:23:24 - Securing GET /v3/api-docs/swagger-config
2024-11-03 13:23:24 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 13:23:24 - Secured GET /v3/api-docs/swagger-config
2024-11-03 13:23:24 - Securing GET /v3/api-docs
2024-11-03 13:23:24 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 13:23:24 - Secured GET /v3/api-docs
2024-11-03 13:23:25 - Init duration for springdoc-openapi is: 355 ms
2024-11-03 13:23:36 - Securing GET /api/clothes
2024-11-03 13:23:36 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 13:23:36 - Secured GET /api/clothes
2024-11-03 13:23:36 - Fetching all garments
2024-11-03 13:23:37 - Fetched 0 garments
2024-11-03 13:23:51 - Securing POST /api/register
2024-11-03 13:23:51 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 13:23:51 - Secured POST /api/register
2024-11-03 13:23:51 - Registering user: com.secondhand.marketplace.entity.User@6a5ccdcb
2024-11-03 13:23:51 - User registered successfully with ID: 1
2024-11-03 13:23:51 - User registered
2024-11-03 13:24:02 - Securing POST /api/register
2024-11-03 13:24:02 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 13:24:02 - Secured POST /api/register
2024-11-03 13:24:02 - Registering user: com.secondhand.marketplace.entity.User@4f725fdb
2024-11-03 13:24:17 - Securing POST /api/authenticate
2024-11-03 13:24:17 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 13:24:17 - Secured POST /api/authenticate
2024-11-03 13:24:17 - Authenticated user
2024-11-03 13:24:17 - User string authenticated successfully.
2024-11-03 13:24:36 - Securing GET /api/clothes
2024-11-03 13:24:36 - Secured GET /api/clothes
2024-11-03 13:24:36 - Fetching all garments
2024-11-03 13:24:36 - Fetched 0 garments
2024-11-03 13:24:39 - Securing GET /api/clothes
2024-11-03 13:24:39 - Secured GET /api/clothes
2024-11-03 13:24:39 - Fetching all garments
2024-11-03 13:24:39 - Fetched 0 garments
2024-11-03 13:24:59 - Securing POST /api/clothes/add
2024-11-03 13:24:59 - Secured POST /api/clothes/add
2024-11-03 13:24:59 - Publishing garment: com.secondhand.marketplace.entity.Garment@e0c3f17
2024-11-03 13:24:59 - Garment published successfully by user string: GarmentDto(id=1, type=string, description=string, size=string, price=10.0)
2024-11-03 13:25:16 - Securing GET /api/clothes/1
2024-11-03 13:25:16 - Secured GET /api/clothes/1
2024-11-03 13:25:16 - Fetched garment with id 1: GarmentDto(id=1, type=string, description=string, size=string, price=10.0)
2024-11-03 13:26:57 - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-11-03 13:26:57 - HikariPool-1 - Shutdown initiated...
2024-11-03 13:26:57 - HikariPool-1 - Shutdown completed.
2024-11-03 13:32:31 - User testUser authenticated successfully.
2024-11-03 13:32:31 - Authentication failed for user testUser: Invalid credentials
2024-11-03 13:32:31 - Unexpected error during authentication for user testUser: Unexpected error
java.lang.RuntimeException: Unexpected error
	at com.secondhand.marketplace.controller.AuthController.authenticate(AuthController.java:43)
	at com.secondhand.marketplace.controller.AuthControllerTest.testAuthenticate_UnexpectedError(AuthControllerTest.java:76)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:728)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:218)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:214)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2024-11-03 13:32:31 - Fetched garment with id 1: GarmentDto(id=null, type=null, description=null, size=null, price=0.0, publisherId=null)
2024-11-03 13:32:31 - Unauthorized access attempt to delete garment with id 1
2024-11-03 13:32:31 - Fetched 1 garments
2024-11-03 13:32:31 - Garment published successfully by user testUser: GarmentDto(id=null, type=null, description=null, size=null, price=0.0, publisherId=null)
2024-11-03 13:32:31 - Garment with id 1 updated successfully by user testUser
2024-11-03 13:32:31 - Garment with id 1 unpublished by user testUser
2024-11-03 13:32:31 - Unauthorized access attempt to publish garment
2024-11-03 13:32:32 - Initializing Spring TestDispatcherServlet ''
2024-11-03 13:32:32 - Initializing Servlet ''
2024-11-03 13:32:32 - Completed initialization in 4 ms
2024-11-03 13:32:32 - User registered
2024-11-03 13:32:32 - Initializing Spring TestDispatcherServlet ''
2024-11-03 13:32:32 - Initializing Servlet ''
2024-11-03 13:32:32 - Completed initialization in 0 ms
2024-11-03 13:32:32 - Could not detect default configuration classes for test class [com.secondhand.marketplace.MarketplaceApplicationTests]: MarketplaceApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-11-03 13:32:32 - Found @SpringBootConfiguration com.secondhand.marketplace.MarketplaceApplication for test class com.secondhand.marketplace.MarketplaceApplicationTests
2024-11-03 13:32:33 - Starting MarketplaceApplicationTests using Java 17.0.10 with PID 24432 (started by User in C:\Users\User\Desktop\GITHUB\secondhand-marketplace)
2024-11-03 13:32:33 - Running with Spring Boot v3.3.5, Spring v6.1.14
2024-11-03 13:32:33 - No active profile set, falling back to 1 default profile: "default"
2024-11-03 13:32:34 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-11-03 13:32:34 - Finished Spring Data repository scanning in 69 ms. Found 2 JPA repository interfaces.
2024-11-03 13:32:34 - HikariPool-1 - Starting...
2024-11-03 13:32:35 - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-11-03 13:32:35 - HikariPool-1 - Start completed.
2024-11-03 13:32:35 - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-11-03 13:32:35 - HHH000412: Hibernate ORM core version 6.5.3.Final
2024-11-03 13:32:35 - HHH000026: Second-level cache disabled
2024-11-03 13:32:35 - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-11-03 13:32:35 - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-11-03 13:32:36 - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-11-03 13:32:36 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-11-03 13:32:37 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-11-03 13:32:37 - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2024-11-03 13:32:38 - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2024-11-03 13:32:38 - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-11-03 13:32:38 - Started MarketplaceApplicationTests in 5.907 seconds (process running for 10.661)
2024-11-03 13:32:39 - Fetching garments by type: Shirt
2024-11-03 13:32:39 - Publishing garment: com.secondhand.marketplace.entity.Garment@28c06c3c
2024-11-03 13:32:39 - Updating garment ID: 1
2024-11-03 13:32:39 - Unpublishing garment ID: 1
2024-11-03 13:32:39 - Garment not found with ID: 1
2024-11-03 13:32:39 - Unauthorized delete attempt by user 2 for garment ID: 1
2024-11-03 13:32:39 - Garment not found with ID: 1
2024-11-03 13:32:39 - Unauthorized update attempt by user 2 for garment ID: 1
2024-11-03 13:32:39 - Fetching all garments
2024-11-03 13:32:39 - Registering user: com.secondhand.marketplace.entity.User@7a696a6b
2024-11-03 13:32:39 - User registered successfully with ID: 1
2024-11-03 13:32:39 - Registering user: com.secondhand.marketplace.entity.User@36dd68f1
2024-11-03 13:32:39 - User registered successfully with ID: 1
2024-11-03 13:32:39 - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-11-03 13:32:39 - HikariPool-1 - Shutdown initiated...
2024-11-03 13:32:39 - HikariPool-1 - Shutdown completed.
2024-11-03 15:29:37 - Starting MarketplaceApplication using Java 17.0.10 with PID 11864 (C:\Users\User\Desktop\GITHUB\secondhand-marketplace\target\classes started by User in C:\Users\User\Desktop\GITHUB\secondhand-marketplace)
2024-11-03 15:29:37 - Running with Spring Boot v3.3.5, Spring v6.1.14
2024-11-03 15:29:37 - No active profile set, falling back to 1 default profile: "default"
2024-11-03 15:29:38 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-11-03 15:29:38 - Finished Spring Data repository scanning in 91 ms. Found 2 JPA repository interfaces.
2024-11-03 15:29:39 - Tomcat initialized with port 8080 (http)
2024-11-03 15:29:39 - Initializing ProtocolHandler ["http-nio-8080"]
2024-11-03 15:29:39 - Starting service [Tomcat]
2024-11-03 15:29:39 - Starting Servlet engine: [Apache Tomcat/10.1.31]
2024-11-03 15:29:39 - Initializing Spring embedded WebApplicationContext
2024-11-03 15:29:39 - Root WebApplicationContext: initialization completed in 2544 ms
2024-11-03 15:29:40 - HikariPool-1 - Starting...
2024-11-03 15:29:40 - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-11-03 15:29:40 - HikariPool-1 - Start completed.
2024-11-03 15:29:40 - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-11-03 15:29:40 - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-11-03 15:29:40 - HHH000412: Hibernate ORM core version 6.5.3.Final
2024-11-03 15:29:40 - HHH000026: Second-level cache disabled
2024-11-03 15:29:41 - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-11-03 15:29:41 - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-11-03 15:29:42 - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-11-03 15:29:42 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-11-03 15:29:43 - Filter 'jwtAuthenticationFilter' configured for use
2024-11-03 15:29:43 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-11-03 15:29:43 - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2024-11-03 15:29:43 - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2024-11-03 15:29:44 - Starting ProtocolHandler ["http-nio-8080"]
2024-11-03 15:29:44 - Tomcat started on port 8080 (http) with context path '/'
2024-11-03 15:29:44 - Started MarketplaceApplication in 7.729 seconds (process running for 8.65)
2024-11-03 15:29:50 - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-03 15:29:50 - Initializing Servlet 'dispatcherServlet'
2024-11-03 15:29:50 - Completed initialization in 1 ms
2024-11-03 15:29:50 - Securing GET /swagger-ui/index.html
2024-11-03 15:29:50 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 15:29:50 - Secured GET /swagger-ui/index.html
2024-11-03 15:29:50 - Securing GET /swagger-ui/swagger-ui.css
2024-11-03 15:29:50 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 15:29:50 - Secured GET /swagger-ui/swagger-ui.css
2024-11-03 15:29:50 - Securing GET /swagger-ui/index.css
2024-11-03 15:29:50 - Securing GET /swagger-ui/swagger-ui-bundle.js
2024-11-03 15:29:50 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 15:29:50 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 15:29:50 - Secured GET /swagger-ui/swagger-ui-bundle.js
2024-11-03 15:29:50 - Secured GET /swagger-ui/index.css
2024-11-03 15:29:50 - Securing GET /swagger-ui/swagger-ui-standalone-preset.js
2024-11-03 15:29:50 - Securing GET /swagger-ui/swagger-initializer.js
2024-11-03 15:29:50 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 15:29:50 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 15:29:50 - Secured GET /swagger-ui/swagger-initializer.js
2024-11-03 15:29:50 - Secured GET /swagger-ui/swagger-ui-standalone-preset.js
2024-11-03 15:29:50 - Securing GET /v3/api-docs/swagger-config
2024-11-03 15:29:50 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 15:29:50 - Secured GET /v3/api-docs/swagger-config
2024-11-03 15:29:50 - Securing GET /v3/api-docs
2024-11-03 15:29:50 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 15:29:50 - Secured GET /v3/api-docs
2024-11-03 15:29:51 - Init duration for springdoc-openapi is: 399 ms
2024-11-03 15:30:04 - Securing POST /api/register
2024-11-03 15:30:04 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 15:30:04 - Secured POST /api/register
2024-11-03 15:30:04 - Registering user: com.secondhand.marketplace.entity.User@2b6e0ae
2024-11-03 15:30:04 - User registered successfully with ID: 1
2024-11-03 15:30:04 - User registered
2024-11-03 15:30:13 - Securing POST /api/authenticate
2024-11-03 15:30:13 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 15:30:13 - Secured POST /api/authenticate
2024-11-03 15:30:13 - Authenticated user
2024-11-03 15:30:13 - User string authenticated successfully.
2024-11-03 15:30:43 - Securing POST /api/clothes/add
2024-11-03 15:30:43 - Secured POST /api/clothes/add
2024-11-03 15:30:43 - Publishing garment: com.secondhand.marketplace.entity.Garment@a7e7e63
2024-11-03 15:30:43 - Garment published successfully by user string: GarmentDto(id=1, type=string, description=string, size=string, price=0.0, publisherId=1)
2024-11-03 15:30:55 - Securing GET /api/clothes
2024-11-03 15:30:55 - Secured GET /api/clothes
2024-11-03 15:30:55 - Fetching all garments
2024-11-03 15:30:55 - Fetched 1 garments
2024-11-03 15:31:06 - Securing POST /api/clothes/add
2024-11-03 15:31:06 - Secured POST /api/clothes/add
2024-11-03 15:31:06 - Publishing garment: com.secondhand.marketplace.entity.Garment@4db9b403
2024-11-03 15:31:06 - Garment published successfully by user string: GarmentDto(id=2, type=shirt, description=string, size=string, price=0.0, publisherId=1)
2024-11-03 15:31:12 - Securing GET /api/clothes
2024-11-03 15:31:12 - Secured GET /api/clothes
2024-11-03 15:31:12 - Fetching all garments
2024-11-03 15:31:12 - Fetched 2 garments
2024-11-03 15:31:22 - Securing GET /api/clothes?type=shirt
2024-11-03 15:31:22 - Secured GET /api/clothes?type=shirt
2024-11-03 15:31:22 - Fetching garments by type: shirt
2024-11-03 15:31:22 - Fetched 1 garments
2024-11-03 15:31:36 - Securing DELETE /api/clothes/2
2024-11-03 15:31:36 - Secured DELETE /api/clothes/2
2024-11-03 15:31:36 - Unpublishing garment ID: 2
2024-11-03 15:31:36 - Garment with id 2 unpublished by user string
2024-11-03 15:31:54 - Securing GET /api/clothes/1
2024-11-03 15:31:54 - Secured GET /api/clothes/1
2024-11-03 15:31:54 - Fetched garment with id 1: GarmentDto(id=1, type=string, description=string, size=string, price=0.0, publisherId=1)
2024-11-03 15:32:01 - Securing GET /api/clothes?type=shirt
2024-11-03 15:32:01 - Secured GET /api/clothes?type=shirt
2024-11-03 15:32:01 - Fetching garments by type: shirt
2024-11-03 15:32:01 - Fetched 0 garments
2024-11-03 15:32:24 - Securing PUT /api/clothes/1
2024-11-03 15:32:24 - Secured PUT /api/clothes/1
2024-11-03 15:32:24 - Updating garment ID: 1
2024-11-03 15:32:24 - Garment with id 1 updated successfully by user string
2024-11-03 15:32:32 - Securing GET /api/clothes/1
2024-11-03 15:32:32 - Secured GET /api/clothes/1
2024-11-03 15:32:32 - Fetched garment with id 1: GarmentDto(id=1, type=pants, description=string, size=string, price=0.0, publisherId=1)
2024-11-03 15:32:49 - Securing GET /api/clothes/1
2024-11-03 15:32:49 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 15:32:49 - Secured GET /api/clothes/1
2024-11-03 15:32:49 - Fetched garment with id 1: GarmentDto(id=1, type=pants, description=string, size=string, price=0.0, publisherId=1)
2024-11-03 15:32:52 - Securing GET /api/clothes/1
2024-11-03 15:32:52 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 15:32:52 - Secured GET /api/clothes/1
2024-11-03 15:32:52 - Fetched garment with id 1: GarmentDto(id=1, type=pants, description=string, size=string, price=0.0, publisherId=1)
2024-11-03 15:32:57 - Securing PUT /api/clothes/1
2024-11-03 15:32:57 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 15:32:57 - Secured PUT /api/clothes/1
2024-11-03 15:32:57 - Unauthorized access attempt to update garment with id 1
2024-11-03 15:33:05 - Securing GET /api/clothes?type=shirt
2024-11-03 15:33:05 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 15:33:05 - Secured GET /api/clothes?type=shirt
2024-11-03 15:33:05 - Fetching garments by type: shirt
2024-11-03 15:33:05 - Fetched 0 garments
2024-11-03 15:33:12 - Securing GET /api/clothes?type=pants
2024-11-03 15:33:12 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 15:33:12 - Secured GET /api/clothes?type=pants
2024-11-03 15:33:12 - Fetching garments by type: pants
2024-11-03 15:33:12 - Fetched 1 garments
2024-11-03 15:33:57 - Securing POST /api/register
2024-11-03 15:33:57 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 15:33:57 - Secured POST /api/register
2024-11-03 15:33:57 - Registering user: com.secondhand.marketplace.entity.User@1f3f29ac
2024-11-03 15:33:57 - User registered successfully with ID: 2
2024-11-03 15:33:57 - User registered
2024-11-03 15:34:08 - Securing POST /api/authenticate
2024-11-03 15:34:08 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 15:34:08 - Secured POST /api/authenticate
2024-11-03 15:34:08 - Failed to authenticate since password does not match stored value
2024-11-03 15:34:08 - Failed to authenticate since password does not match stored value
2024-11-03 15:34:08 - Authentication failed for user sandra: Bad credentials
2024-11-03 15:34:18 - Securing POST /api/authenticate
2024-11-03 15:34:18 - Set SecurityContextHolder to anonymous SecurityContext
2024-11-03 15:34:18 - Secured POST /api/authenticate
2024-11-03 15:34:18 - Authenticated user
2024-11-03 15:34:18 - User sandra authenticated successfully.
2024-11-03 15:34:48 - Securing POST /api/clothes/add
2024-11-03 15:34:48 - Secured POST /api/clothes/add
2024-11-03 15:34:48 - Publishing garment: com.secondhand.marketplace.entity.Garment@3bf072d6
2024-11-03 15:34:48 - Garment published successfully by user sandra: GarmentDto(id=3, type=blouse, description=string, size=string, price=0.0, publisherId=2)
2024-11-03 15:35:00 - Securing DELETE /api/clothes/1
2024-11-03 15:35:00 - Secured DELETE /api/clothes/1
2024-11-03 15:35:00 - Unauthorized delete attempt by user 2 for garment ID: 1
2024-11-03 15:35:00 - Unauthorized action: Unauthorized action: You do not own this garment.
2024-11-03 15:35:11 - Securing PUT /api/clothes/1
2024-11-03 15:35:11 - Secured PUT /api/clothes/1
2024-11-03 15:35:11 - Unauthorized update attempt by user 2 for garment ID: 1
2024-11-03 15:35:11 - Unauthorized action: Unauthorized action: You do not own this garment.
2024-11-03 15:35:33 - Securing GET /api/clothes?type=pants
2024-11-03 15:35:33 - Secured GET /api/clothes?type=pants
2024-11-03 15:35:33 - Fetching garments by type: pants
2024-11-03 15:35:33 - Fetched 1 garments
2024-11-03 15:35:38 - Securing GET /api/clothes
2024-11-03 15:35:38 - Secured GET /api/clothes
2024-11-03 15:35:38 - Fetching all garments
2024-11-03 15:35:38 - Fetched 2 garments
2024-11-03 15:36:06 - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-11-03 15:36:06 - HikariPool-1 - Shutdown initiated...
2024-11-03 15:36:06 - HikariPool-1 - Shutdown completed.
2024-11-03 15:36:33 - User testUser authenticated successfully.
2024-11-03 15:36:33 - Authentication failed for user testUser: Invalid credentials
2024-11-03 15:36:33 - Unexpected error during authentication for user testUser: Unexpected error
java.lang.RuntimeException: Unexpected error
	at com.secondhand.marketplace.controller.AuthController.authenticate(AuthController.java:43)
	at com.secondhand.marketplace.controller.AuthControllerTest.testAuthenticate_UnexpectedError(AuthControllerTest.java:76)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:728)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:218)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:214)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2024-11-03 15:36:33 - Fetched garment with id 1: GarmentDto(id=null, type=null, description=null, size=null, price=0.0, publisherId=null)
2024-11-03 15:36:33 - Unauthorized access attempt to delete garment with id 1
2024-11-03 15:36:33 - Fetched 1 garments
2024-11-03 15:36:33 - Garment published successfully by user testUser: GarmentDto(id=null, type=null, description=null, size=null, price=0.0, publisherId=null)
2024-11-03 15:36:33 - Garment with id 1 updated successfully by user testUser
2024-11-03 15:36:33 - Garment with id 1 unpublished by user testUser
2024-11-03 15:36:33 - Unauthorized access attempt to publish garment
2024-11-03 15:36:34 - Initializing Spring TestDispatcherServlet ''
2024-11-03 15:36:34 - Initializing Servlet ''
2024-11-03 15:36:34 - Completed initialization in 3 ms
2024-11-03 15:36:34 - User registered
2024-11-03 15:36:34 - Initializing Spring TestDispatcherServlet ''
2024-11-03 15:36:34 - Initializing Servlet ''
2024-11-03 15:36:34 - Completed initialization in 0 ms
2024-11-03 15:36:34 - Could not detect default configuration classes for test class [com.secondhand.marketplace.MarketplaceApplicationTests]: MarketplaceApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-11-03 15:36:34 - Found @SpringBootConfiguration com.secondhand.marketplace.MarketplaceApplication for test class com.secondhand.marketplace.MarketplaceApplicationTests
2024-11-03 15:36:35 - Starting MarketplaceApplicationTests using Java 17.0.10 with PID 7276 (started by User in C:\Users\User\Desktop\GITHUB\secondhand-marketplace)
2024-11-03 15:36:35 - Running with Spring Boot v3.3.5, Spring v6.1.14
2024-11-03 15:36:35 - No active profile set, falling back to 1 default profile: "default"
2024-11-03 15:36:36 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-11-03 15:36:36 - Finished Spring Data repository scanning in 77 ms. Found 2 JPA repository interfaces.
2024-11-03 15:36:36 - HikariPool-1 - Starting...
2024-11-03 15:36:37 - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-11-03 15:36:37 - HikariPool-1 - Start completed.
2024-11-03 15:36:37 - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-11-03 15:36:37 - HHH000412: Hibernate ORM core version 6.5.3.Final
2024-11-03 15:36:37 - HHH000026: Second-level cache disabled
2024-11-03 15:36:37 - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-11-03 15:36:37 - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-11-03 15:36:38 - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-11-03 15:36:38 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-11-03 15:36:39 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-11-03 15:36:39 - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2024-11-03 15:36:39 - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2024-11-03 15:36:40 - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-11-03 15:36:40 - Started MarketplaceApplicationTests in 5.83 seconds (process running for 10.386)
2024-11-03 15:36:40 - Fetching garments by type: Shirt
2024-11-03 15:36:40 - Publishing garment: com.secondhand.marketplace.entity.Garment@4ff1e20b
2024-11-03 15:36:40 - Updating garment ID: 1
2024-11-03 15:36:40 - Unpublishing garment ID: 1
2024-11-03 15:36:40 - Garment not found with ID: 1
2024-11-03 15:36:40 - Unauthorized delete attempt by user 2 for garment ID: 1
2024-11-03 15:36:40 - Garment not found with ID: 1
2024-11-03 15:36:40 - Unauthorized update attempt by user 2 for garment ID: 1
2024-11-03 15:36:40 - Fetching all garments
2024-11-03 15:36:41 - Registering user: com.secondhand.marketplace.entity.User@2c34c819
2024-11-03 15:36:41 - User registered successfully with ID: 1
2024-11-03 15:36:41 - Registering user: com.secondhand.marketplace.entity.User@5c65d5c3
2024-11-03 15:36:41 - User registered successfully with ID: 1
2024-11-03 15:36:41 - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-11-03 15:36:41 - HikariPool-1 - Shutdown initiated...
2024-11-03 15:36:41 - HikariPool-1 - Shutdown completed.
2024-11-03 15:36:54 - User testUser authenticated successfully.
2024-11-03 15:36:54 - Authentication failed for user testUser: Invalid credentials
2024-11-03 15:36:54 - Unexpected error during authentication for user testUser: Unexpected error
java.lang.RuntimeException: Unexpected error
	at com.secondhand.marketplace.controller.AuthController.authenticate(AuthController.java:43)
	at com.secondhand.marketplace.controller.AuthControllerTest.testAuthenticate_UnexpectedError(AuthControllerTest.java:76)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:728)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:218)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:214)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2024-11-03 15:36:54 - Fetched garment with id 1: GarmentDto(id=null, type=null, description=null, size=null, price=0.0, publisherId=null)
2024-11-03 15:36:54 - Unauthorized access attempt to delete garment with id 1
2024-11-03 15:36:54 - Fetched 1 garments
2024-11-03 15:36:54 - Garment published successfully by user testUser: GarmentDto(id=null, type=null, description=null, size=null, price=0.0, publisherId=null)
2024-11-03 15:36:54 - Garment with id 1 updated successfully by user testUser
2024-11-03 15:36:54 - Garment with id 1 unpublished by user testUser
2024-11-03 15:36:54 - Unauthorized access attempt to publish garment
2024-11-03 15:36:55 - Initializing Spring TestDispatcherServlet ''
2024-11-03 15:36:55 - Initializing Servlet ''
2024-11-03 15:36:55 - Completed initialization in 4 ms
2024-11-03 15:36:55 - User registered
2024-11-03 15:36:55 - Initializing Spring TestDispatcherServlet ''
2024-11-03 15:36:55 - Initializing Servlet ''
2024-11-03 15:36:55 - Completed initialization in 0 ms
2024-11-03 15:36:55 - Could not detect default configuration classes for test class [com.secondhand.marketplace.MarketplaceApplicationTests]: MarketplaceApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-11-03 15:36:55 - Found @SpringBootConfiguration com.secondhand.marketplace.MarketplaceApplication for test class com.secondhand.marketplace.MarketplaceApplicationTests
2024-11-03 15:36:56 - Starting MarketplaceApplicationTests using Java 17.0.10 with PID 24572 (started by User in C:\Users\User\Desktop\GITHUB\secondhand-marketplace)
2024-11-03 15:36:56 - Running with Spring Boot v3.3.5, Spring v6.1.14
2024-11-03 15:36:56 - No active profile set, falling back to 1 default profile: "default"
2024-11-03 15:36:57 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-11-03 15:36:57 - Finished Spring Data repository scanning in 77 ms. Found 2 JPA repository interfaces.
2024-11-03 15:36:58 - HikariPool-1 - Starting...
2024-11-03 15:36:58 - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-11-03 15:36:58 - HikariPool-1 - Start completed.
2024-11-03 15:36:58 - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-11-03 15:36:58 - HHH000412: Hibernate ORM core version 6.5.3.Final
2024-11-03 15:36:58 - HHH000026: Second-level cache disabled
2024-11-03 15:36:58 - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-11-03 15:36:58 - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-11-03 15:36:59 - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-11-03 15:36:59 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-11-03 15:37:00 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-11-03 15:37:00 - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2024-11-03 15:37:01 - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2024-11-03 15:37:01 - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-11-03 15:37:01 - Started MarketplaceApplicationTests in 5.766 seconds (process running for 10.395)
2024-11-03 15:37:02 - Fetching garments by type: Shirt
2024-11-03 15:37:02 - Publishing garment: com.secondhand.marketplace.entity.Garment@70f446c
2024-11-03 15:37:02 - Updating garment ID: 1
2024-11-03 15:37:02 - Unpublishing garment ID: 1
2024-11-03 15:37:02 - Garment not found with ID: 1
2024-11-03 15:37:02 - Unauthorized delete attempt by user 2 for garment ID: 1
2024-11-03 15:37:02 - Garment not found with ID: 1
2024-11-03 15:37:02 - Unauthorized update attempt by user 2 for garment ID: 1
2024-11-03 15:37:02 - Fetching all garments
2024-11-03 15:37:02 - Registering user: com.secondhand.marketplace.entity.User@75910e0e
2024-11-03 15:37:02 - User registered successfully with ID: 1
2024-11-03 15:37:02 - Registering user: com.secondhand.marketplace.entity.User@45b244c4
2024-11-03 15:37:02 - User registered successfully with ID: 1
2024-11-03 15:37:02 - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-11-03 15:37:02 - HikariPool-1 - Shutdown initiated...
2024-11-03 15:37:02 - HikariPool-1 - Shutdown completed.
